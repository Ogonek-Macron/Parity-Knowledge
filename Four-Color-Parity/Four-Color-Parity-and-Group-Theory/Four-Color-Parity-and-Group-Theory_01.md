## 四色パリティと群論 - 第 1 回（「n 色パリティ」の定義まで）

今回より、『四色パリティと群論』の連載を開始する。

目的としては、筆者 (Ogonek:Macron) による「四色パリティ理論」についてより効果的な考察を目指すため、四色パリティ理論と群論の関連について紹介することである。

四色パリティ理論は、『テトリス』というゲームに関連して、筆者により 2021 年 2 月 19 日から構想され、同年 11 月下旬に公開の場で言及された理論である。現在も研究途上であり、筆者を含む有志により日々考察が行われている。

本稿は群論の知識を前提とする。また、必ずしも四色パリティ理論の入門書ではない。四色パリティを実用するだけなら必要ない内容かもしれないし、すぐには実用的なことも述べない。いわゆる抽象的な話を展開していくが、厳密な理論の裏付けに資することであるため、各々の興味や必要性に応じてお読みいただきたい。

なお、筆者は数学を専門的に学んだ経験が無いため、万が一にも不備があればご指摘をいただけると嬉しい。

### 従来知られているパリティ
テトリスやテトロミノの敷き詰め問題では、マスを 2 色で規則的に塗り分けることでミノの配置の可能性を限定するということがよく行われる。

最も有名な方法として、盤面を市松模様やチェスのボードのように塗り分けるものがある。単に「パリティ」と言った場合はこれを指すことが多いが、他の塗り分けの方法とはっきり区別するために「**市松パリティ**」と呼ぶこともある。本稿では塗り分けの方法を多数扱うため、この方法は「市松パリティ」と呼称することとし、また、市松パリティのみを指して「パリティ」と言うことも無い。

また、知名度は落ちるため解説しているサイトも少ないのだが、縦の列を 2 色で交互に塗る「**縦パリティ**」や、横の段を 2 色で交互に塗る「**横パリティ**」の存在が知られている。

なお、市松パリティと縦パリティについては、knewjade さんの『[パフェのための基礎理論](https://gist.github.com/knewjade/2b8620cf81b7dd9ecc0e75a6084b536d)』を参照されたい。

### 3 色以上でもパリティは作れるか

すると気になるのは、もっと多くの色で盤面を塗り分けるとどうなるか、ということである。つまり、上記 3 種類の「パリティ」の概念を自然な形で拡張したい。

先ほどの塗り分け方に共通することは、「内部が 2 箇所ずつ 2 色で塗り分けられた 2 × 2 マスの正方形 4 つずつの頂点をくっ付けるように配置し、xy 平面に拡張している」ということである。この方法は $( {}_4 \mathrm{C}_2 \times {}_2 \mathrm{C}_2 ) / 2 \!$ より全 3 通りあるとすぐに分かり、既出のものですべてだ。

さて、これを「内部が n 箇所ずつ n 色で塗り分けられた n × n マスの正方形 4 つずつの頂点をくっ付けるように配置し、xy 平面に拡張する」ような塗り方に一般化出来ないだろうか。しかし、この条件だと n = 3 の時点で $( {}_9 \mathrm{C}_3 \times {}_6 \mathrm{C}_3 \times {}_3 \mathrm{C}_3 ) / 3 \!$ より全部で 280 通りと膨大な数になり、しかも規則性の低く取り扱いにくい塗り方が現れる。そこで、扱いが比較的簡単そうな、ある程度規則性の高いもののみに限定したい。

### 調べるパリティに満たして欲しい性質

ここで、調べる塗り分け方においては色の並び方の規則性が高くあって欲しい。すなわち、座標の分からない特定の 1 マスのみの色を確認するだけで、そのマスから見た座標の差を元に全てのマスの色が分かるようにしたい。

このためには、各マスについて xy 平面上の座標を考えた場合に、次の条件を満たす必要がある。

> 任意のマス A, B, C に対して、B から A の座標を引いた差を C の座標に加えた結果のマスを D とする。
> 
> このとき、A と B が同じ色ならば、C と D も同じ色である。

結論としては、この条件を満たす任意の塗り分け方について考えたい。このうち有限種類の色で塗り分けられるものについては、ある正の整数 n が存在して「n 色パリティ」である、と言えるようにする。また、有限種類の色で塗り分けられないものについては「無限色パリティ」と呼ぶことにする。

### パリティと群論

さて、ここまで「n 色パリティ」と「無限色パリティ」の定義をこうなるようにしたいと述べた。この条件において、座標 $( 0 , 0 )$ のマスと同じ色で塗られるマスの座標全体の集合を考えると、この集合は加法に関して $\mathbb{Z}^2$ の正規部分群である。

順を追って確認しよう。まず、すべてのマスの座標の集合について考える。任意のマスの座標を $( x , y )$ とすると、 $x$ の取り得る値全体の集合、 $y$ の取り得る値全体の集合はそれぞれ $\mathbb{Z}$ に一致する。よって、すべてのマスの座標の集合は $\mathbb{Z}^2$ と表すことができ、加法に関してアーベル群である。

次に、マス $( 0 , 0 )$ と同じ色で塗られるマスの座標全体の集合について考える。前提条件として、加法に感じて演算が閉じるもののみについて考えている。 $\mathbb{Z}^2$ の部分集合であるから、結合則と可換則は明らかに成り立つ。また、単位元は $( 0 , 0 )$ であり、これは含まれる。逆元について考えると、 $- ( x , y ) = ( -x , -y )$ であり、こちらも含まれる。前提条件からマス $( x , y )$ はマス $( 0 , 0 )$ と同じ色であり、 $( x , y )$ を足すと $( 0 , 0 )$ になるマス $( -x , -y )$ は含まれるはずだと分かる。従って、マス $( 0 , 0 )$ と色が同じマスの座標全体の集合は、加法に関して $\mathbb{Z}^2$ の正規部分群であると言えた。

### 「無限色パリティ」の定義

n 色パリティの定義よりこちらの方が簡単なので先に行おう。

四色パリティ理論における無限色パリティの定義は以下の通りである。

> **定義** (**無限色パリティ**)
> 
> 集合 $\mathbb{Z}^2$ 上の二項演算 $+$ を次のように定義すると、集合 $\mathbb{Z}^2$ は演算 $+$ についてアーベル群となる。
> 
>> **演算**
>>
>> $$ \text{ベクトル } \begin{pmatrix} x_1 \\\ y_1 \end{pmatrix} , \begin{pmatrix} x_2 \\\ y_2 \end{pmatrix} \in \mathbb{Z}^2 \text{ について、} $$
>> 
>> $$ \begin{pmatrix} x_1 \\\ y_1 \end{pmatrix} + \begin{pmatrix} x_2 \\\ y_2 \end{pmatrix} \coloneqq \begin{pmatrix} x_1 + x_2 \\\ y_1 + y_2 \end{pmatrix} $$
> 
> このとき、正規部分群 $N \triangleleft \mathbb{Z}^2$ のうち、剰余群 $\mathbb{Z}^2 / N$ の位数が正の無限大となる場合、剰余群 $\mathbb{Z}^2 / N$ は「**無限色パリティ**」であると言う。

各剰余類と各色が一対一で対応することに注意されたい。また、正規部分群 $N$ の位数は 0 または正の無限大となる。

### 「n 色パリティ」の定義

続いて n 色パリティの定義を行う。

先述した「内部が n 箇所ずつ n 色で塗り分けられた n × n マスの正方形 4 つずつの頂点をくっ付けるように配置し、xy 平面に拡張する」という要件も満たす必要があることに注意したい。無限色パリティにおいては、言わばこの基準となる正方形の一辺の長さが正の無限大であった。そこで $\mathbb{Z}^2$ の剰余群を考えていたわけだが、n 色パリティにおいては簡単のため $( \mathbb{Z} / n \mathbb{Z} )^2$ の剰余群を考えればよい。

さて、四色パリティ理論における n 色パリティの定義は以下の通りである。

> **定義** (**n 色パリティ**)
> 
> 任意の正の整数 $n \in \mathbb{N}^+$ について、集合 $( \mathbb{Z} / n \mathbb{Z} )^2$ 上の二項演算 $+$ を次のように定義すると、集合 $( \mathbb{Z} / n \mathbb{Z} )^2$ は演算 $+$ についてアーベル群となる。
> 
>> **演算**
>>
>> $$ \text{ベクトル } \begin{pmatrix} x_1 \\\ y_1 \end{pmatrix} , \begin{pmatrix} x_2 \\\ y_2 \end{pmatrix} \in ( \mathbb{Z} / n \mathbb{Z} )^2 \text{ について、} $$
>> 
>> $$ \begin{pmatrix} x_1 \\\ y_1 \end{pmatrix} + \begin{pmatrix} x_2 \\\ y_2 \end{pmatrix} \coloneqq \begin{pmatrix} (x_1 + x_2) \bmod n \\\ (y_1 + y_2) \bmod n \end{pmatrix} $$
> 
> このとき、正規部分群 $N \triangleleft ( \mathbb{Z} / n \mathbb{Z} )^2$ のうち、剰余群 $( \mathbb{Z} / n \mathbb{Z} )^2 / N$ の位数が $n$ となる場合、剰余群 $( \mathbb{Z} / n \mathbb{Z} )^2 / N$ は「**n 色パリティ**」であると言う。

こちらも、各剰余類と各色が一対一で対応することに注意されたい。また、正規部分群 $N$ と剰余群 $( \mathbb{Z} / n \mathbb{Z} )^2 / N$ とは位数が一致し、 $n$ である。

なお、逆元について補足しておく。『パリティと群論』節では $\mathbb{Z}^2$ を元に議論していたので $- ( x , y ) = ( -x , -y )$ としたが、 $( \mathbb{Z} / n \mathbb{Z} )^2$ 上で議論するにあたっては $- ( x , y ) = ( n - x , n - y )$ であることに注意したい。

また、具体的に $n$ が決まっている場合に言及する際は算用数字ではなく漢数字を用いるのが正式である。すなわち、「2 色パリティ」などではなく「二色パリティ」「四色パリティ」などと書く。これは算用数字による表記を強制的に排除しようという意図ではないが、表記揺れに関する議論をあらかじめ解決するためここに記した。

### むすび

今回は n 色パリティの定義までを紹介した。なお、この記事における定義はすべて筆者による「四色パリティ理論」の中における定義であり、他分野においてこの定義と整合性が取れることを保証しない。また、他分野においてこれ以外の定義を用いることを妨げる意図は無い。以上に注意されたい。

次回以降は、今後の『四色パリティと群論』で述べる内容に関して基本的な定理を紹介する予定だ。
